var TrumanInt=new Class({Implements:Events,initialize:function(t){this.rootEl=t,this.colorPickerEl=this.rootEl.getElement(".color-picker"),this.colorEls=this.rootEl.getElements(".color-picker span"),this.imageEl=this.rootEl.getElement("img"),this.colors=[],_.each(this.colorEls,function(t){var e=t.get("data-color"),o=t.get("data-image"),i=(Asset.image(o),{color:e,url:o});this.colors.push(i)}.bind(this)),this.currentColor=this.colorPickerEl.get("data-start"),Hammer(this.rootEl,{drag:!1,swipe_velocity:.2}).on("swipe",function(t){_.include(["left","right"],t.gesture.direction)&&this.changeImage(t.gesture.direction)}.bind(this)),this.imageFade=new Fx.Tween(this.imageEl,{property:"opacity",duration:300,link:"chain"})},changeImage:function(t){var e,o=_.findWhere(this.colors,{color:this.currentColor}),i=_.indexOf(this.colors,o);"left"==t?(e=i+1,e>this.colors.length-1&&(e=0)):"right"==t&&(e=i-1,0>e&&(e=this.colors.length-1));var n=this.colors[e];this.imageFade.addEvent("complete",function(){this.imageEl.set("src",n.url),this.imageEl.set("alt",n.color),this.imageEl.fade("in")}.bind(this)),this.imageFade.start(0),this.currentColor=n.color}}),Harrys=Harrys||{};window.addEvent("domready",function(){var t=$("learn_more"),e=document.getElement(".sets"),o=new Fx.Scroll(window);t&&o&&(new QuickTap(t),t.addEvent("click",function(){var t=e.getPosition().y;o.start(0,t)}));var i=document.getElements(".product.truman");i&&(Harrys.trumans=[],_.each(i,function(t){var e=new TrumanInt(t);Harrys.trumans.push(e)}))}),window.addEvent("load",function(){var t=document.getElements("h2.section-heading"),e=$("content-wrapper");if(t&&e){var o,i=_.map(t,function(t){return t.getPosition().y});e.addEvent("scroll",function(){var n,r,s=e.getScroll().y;return _.find(i,function(e,o){var i=51;return e-4>s+i?(n=t[o-1],n&&(r=e-s-52),!0):void 0}),s>i[0]&&!n&&(n=t[t.length-1]),o===n?(o&&r&&r>0&&51>r?o.setStyle("top",r):o&&o.setStyle("top",null),void 0):(o&&(o.removeClass("selected"),o.setStyle("top",null)),o=n,o&&(o.addClass("selected"),o&&r&&r>0&&51>r?o.setStyle("top",r):o&&o.setStyle("top",null)),void 0)});var n;(n=function(){if(window.location.hash){var o;if(_.each(t,function(t,e){return t.hasClass(window.location.hash.substring(1))?(o=e,void 0):void 0}),"undefined"!=typeof o){var n=new Fx.Scroll(e,{duration:1e3});n.start(0,i[o]-51)}}else{var n=new Fx.Scroll(e,{duration:1e3});n.start(0,0)}})(),window.onhashchange=n}});